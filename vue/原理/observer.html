<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        // 如何实现一个自存档对象。 当设置temperature 属性时，archive 数组会获取日志条目。
        function Archiver() {
            var temperature = null;
            var archive = [];

            Object.defineProperty(this, 'temperature', {
                get: function () {
                    console.log('get!');
                    return temperature;
                },
                set: function (value) {
                    temperature = value;
                    archive.push({ val: temperature });
                }
            });

            this.getArchive = function () { return archive; };
        }

        var arc = new Archiver();
        arc.temperature; // 'get!'
        arc.temperature = 11;
        arc.temperature = 13;
        arc.getArchive(); // [{ val: 11 }, { val: 13 }]

    </script>
</body>

</html>